<script type="text/javascript" src="/jquery-1.11.1.js"></script>
<script src="https://apis.google.com/js/platform.js" async defer></script>

<link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet">

<meta name="google-signin-client_id" content="705471905548-fij33vt84b6ld8nq7mh8u30hgafrpel2.apps.googleusercontent.com">


<style>
	
	#root {
		cursor: pointer;
	}

	input {
		margin: 5px;
	}
</style>
<center>
<h2 style="margin-top:100px"> Login </h3>

<form action="/login" method="post">
<input placeholder="username" type="text" name="username"><br/>
<input placeholder="password" type="password" name="password"><br/>
<input type="submit">
</form>

<br>
</center>

<div style="position: relative; margin-left:45%; width:10%;">
	<button id="button" onclick="loginG()" style="opacity: 0; z-index: 10000; left: 0px; top: 0px; position: absolute; cursor: pointer; outline: 0px; width: 114px; height: 36px;">Sign in with Google</button>
	<center><iframe frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="position: static; top: 0px; width: 114px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 36px;" tabindex="0" vspace="0" width="100%" id="iframe" name="I0_1437008829441" src="https://apis.google.com/u/0/_/widget/render/signin" data-gapiattached="true" title="Sign in with Google"></iframe></center>
</div>

<center>
<br>
<hr>

<h3> Sign up </h3>

<form action="/createUser" method="post">
<input id="user" placeholder="username" type="text" name="username"> <br/>
<input id="pass" placeholder="email" type="text" name="email"> <br/>
<input id="mail" placeholder="password" type="password" name="password"> <br/>

	
<input type="submit">
</form>

</center>



<script>
	
	function getQueryParams() {
		qs = document.location.search;
		qs = qs.split('+').join(' ');
		
		var params = {},
		tokens,
		re = /[?&]?([^=]+)=([^&]*)/g;
		
		while (tokens = re.exec(qs)) {
			params[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);
		}
		
		return params;
	}

	$(document).ready(function() {
					  
					  $("iframe").contents().find("#root").css('cursor', 'pointer');
					  
					  setInterval(function() {
								  var i = $('#iframe')[0];
								  var r = i.getBoundingClientRect();
								  $('#button').css('position', 'fixed');
								  $('#button').css('left', r.left + 'px');
								  $('#button').css('top', r.top + 'px')
								  }, 500);
					  
					  });
					  
  var params = getQueryParams();
  $('#user').val(params['username']);
  $('#email').val(params['email']);
					  
  function loginG() {
	  window.location = "/auth/google/?redirect=" + encodeURIComponent(params['redirect']);
  }

</script>